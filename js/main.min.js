/*
 * Custom
 */
$(document).ready(function(){
	//partners slider
	
	
	
		 
		$('.header-slider__list').slick({
		  dots: true,
		  arrows: true,
		  infinite: true, 
		  speed: 300,	  
		  slidesToShow: 1,
		  slidesToScroll: 1,
		  responsive: [
		    {
		      breakpoint: 768,
		      settings: { 
		        arrows: false
		      }
		    }
		    ]
		});	  	
	
	
	
		$('.comments-slick-slider__list').slick({
		  dots: false,
		  arrows:true,
		  infinite: true, 
		  speed: 300,	  
		  slidesToShow: 1,
		  slidesToScroll: 1
		});	 
	
	
	
	
		initSlider(1);
		function initSlider(i) {
			let little_nav = '.tabs__content .tab__content-item:nth-child('+i+') .slider-nav';
			let big_nav = '.tabs__content .tab__content-item:nth-child('+i+') .slider-for';
	
			$(big_nav).slick({
			    slidesToShow: 1,
			    slidesToScroll: 1,
			    arrows: false,
			    fade: true,   
			    asNavFor: little_nav,
			    responsive: [
				    {
				      breakpoint: 798,
				      settings: { 
				        dots: true,
				        fade: false
				      }
				    }
				    ]
			  });
	
			  $(little_nav).slick({
			    slidesToShow: 3,
			    slidesToScroll: 1,
			    asNavFor: big_nav,
			    dots: false,
			    arrows: false,
			    centerMode: true,
			    focusOnSelect: true,
			    responsive: [
				    {
				      breakpoint: 798,
				      settings: { 
				        settings: "unslick"
				      }
				    }
				    ]
			  });
	
		}
	
	"use strict";
	
	
	(function($){
	 $('.tabs__header').each(function() {
	    $(this).find('> .tab__header-item').click(function(){
	
	
	        $(this).closest('.tabs__wrap').find('> .tabs__header > .tab__header-item--active').removeClass('tab__header-item--active');
	        $(this).closest('.tabs__wrap').find('> .tabs__content > .tab__content-item--active').removeClass('tab__content-item--active');
	
	
	        let index_tab = $(this).index();
	        let item = $(this).closest('.tabs__wrap').find('> .tabs__content > .tab__content-item')[index_tab];
	        $(item).addClass('tab__content-item--active');
	        $(this).addClass('tab__header-item--active');
	    });
	
	 });
	
	$('.tab__header-item--active').click();
	
	  // $('.tab__header-item').on('click', function() {
	  //     $('.slider-for').slick('reinit');
	  //   });
	
	
	
		$('.tabs__header .tab__header-item:nth-child(2)').click(function(){
			if (!$(this).hasClass('done-slider')) {
				$(this).addClass('done-slider');
				initSlider(2);
			}
		});
	
	}(jQuery));
	
	
		function counter() {
		    var num = Number($('.descr span').eq(0).text()),
		       
		        strGenEnd = '';
		
		    if(num > 1) {
		        num -= 1;        
		        $('.descr span').text(num);
		        // localStorage.setItem('ap', num);
		        $.cookie('ap', num);
		        window.setTimeout(counter, 25000);
		    }
		}
		
		
		// num = Number(localStorage.getItem('ap'));	
		num = Number($.cookie('ap'));
		if(num > 0) {
		    $('.descr span').text(num);
		}
		
		counter();
	
	 
	
	$('.js-popup').on('click', function(){
		console.log('js-popup click');
		let balloon = $(this).attr('data-balloon') || 1;
		if(balloon) {
			$('#popup1 .tab__header-item').removeClass('tab__header-item--active');	
			$('#popup1 .tab__header-item:nth-child('+balloon+')').addClass('tab__header-item--active');
		}
		$('#popup1').parent().addClass('overlay-visible');
	});
	$('.popup-close').on('click', function(){
		$('.overlay').removeClass('overlay-visible'); 
	
		$pl_form.find('.form-title').removeClass('hidden');
		$pl_form.find('.form-title.sale').addClass('hidden');
	});	
	
	
	$('.block-color-item').on('click', function(){
		$('.block-color-item').removeClass('active');
		$(this).addClass('active');
	});	
	
	
	$pl_form = $('.overlay');
	
	$("body").mousemove(function(e){
		
		if (e.clientY < 10) {
			showPoupuForm();
		}
		
		if (e.clientY > 10) {
			if(!$pl_form.hasClass('activator')) {
				$('.overlay').addClass('activator'); 
			}
		}
	});
	
		function showPoupuForm() {
			if($pl_form.hasClass('activator') && !$pl_form.hasClass('used')) {
				$pl_form.addClass('overlay-visible'); 
				$pl_form.addClass('used'); 
				$pl_form.find('.form-title').addClass('hidden');
				$pl_form.find('.form-title.sale').removeClass('hidden');
			}
	}
});